# SYSTEM DEFAULT Configuration
# Default system-wide configuration for modular monitoring suite
# This file contains core system settings and fallback defaults
# 
# CONFIGURATION HIERARCHY (most important to least important):
# 1. Environment Variables (export VARIABLE=value)
# 2. Machine-Specific System Config (config/SYSTEM.conf)
# 3. Module-Specific Config (modules/<MODULE>/config.conf)
# 4. System Default Config (this file - system_default.conf)

# ========================================
# ORCHESTRATOR SETTINGS
# ========================================

# Default monitoring interval when running all modules (seconds)
DEFAULT_MONITOR_INTERVAL=300  # 5 minutes

# Modules directory path (relative to project root)
MODULES_DIR="modules"

# State directory for persistent data
STATE_DIR="/var/tmp/modular-monitor-state"

# Maximum number of modules to run concurrently
MAX_CONCURRENT_MODULES=3

# Timeout for individual module execution (seconds)
MODULE_EXECUTION_TIMEOUT=60

# ========================================
# STATUS SCRIPT SETTINGS  
# ========================================

# Default time span for status analysis if not specified
DEFAULT_STATUS_TIMESPAN="1 hour ago"

# Default end time for status analysis
DEFAULT_STATUS_END_TIME="now"

# Status display options
STATUS_SHOW_CURRENT_READINGS=true
STATUS_SHOW_MODULE_TESTS=true
STATUS_SHOW_RECENT_ALERTS=true
STATUS_SHOW_SYSTEM_INFO=true

# ========================================
# GLOBAL FALLBACK SETTINGS

# Default emergency alert cooldown in seconds (from thresholds.conf)

# Default critical alert cooldown in seconds (from thresholds.conf)

# Default warning alert cooldown in seconds (from thresholds.conf)
# ========================================

# These settings serve as fallbacks for modules that don't specify their own values

# Process and memory thresholds (configured in individual modules)
# - PROCESS_CPU_THRESHOLD: defined in thermal.conf, memory.conf, i915.conf
# - MEMORY_KILL_THRESHOLD: defined in memory.conf
# - GRACE_PERIOD_SECONDS: defined in thermal.conf, memory.conf, i915.conf
# - KILL_PROCESS_WAIT_TIME: defined in thermal.conf, memory.conf, i915.conf

# Emergency actions
ENABLE_EMERGENCY_SHUTDOWN=true    # Allow emergency shutdown autofix
ENABLE_EMERGENCY_ACTIONS=true     # Enable emergency response system

# Notifications (fallback for modules without specific settings)
ENABLE_DESKTOP_NOTIFICATIONS=true   # Show desktop notifications during autofix
ENABLE_WALL_MESSAGES=true          # Send wall messages to all users
ENABLE_DIAGNOSTIC_DUMPS=true       # Create diagnostic dumps during emergencies

# Logging (fallback for modules without specific settings)
AUTOFIX_LOG_LEVEL=info            # Log level for autofix actions
AUTOFIX_LOG_RETENTION_DAYS=30     # How long to keep autofix logs

# ========================================
# MODULE MANAGEMENT
# ========================================

# Module Selection Configuration
# USE_MODULES can be:
#   - "ALL" (enable all available modules)
#   - "NONE" (disable all modules)  
#   - Space-delimited list of specific modules (e.g., "thermal memory i915 usb")
USE_MODULES="ALL"

# Modules to ignore even when USE_MODULES=ALL
# Space-delimited list of module names to skip (e.g., "nonexistent kernel")
IGNORE_MODULES="" 

# Legacy: Path to enabled modules (symlinks) - DEPRECATED, USE_MODULES preferred
# ENABLED_MODULES_DIR="config"

# Module override configs directory
MODULE_OVERRIDES_DIR="config"

# ========================================
# HARDWARE DETECTION & SYSTEM INFO
# ========================================

# Default hardware detection settings (overridden by machine-specific config)
AUTO_DETECT_HARDWARE=true

# Default hardware profile (generic - should be overridden in machine config)
HARDWARE_TYPE="generic"   # Default: generic hardware profile
CPU_VENDOR="unknown"      # Default: unknown CPU vendor
GPU_VENDOR="unknown"      # Default: unknown GPU vendor

# ========================================
# INSTALLATION & SETUP
# ========================================

# Whether this is the first run after installation
FIRST_RUN_AFTER_INSTALL=true

# Modules that need to run during installation
RUN_ON_INSTALL_MODULES_DETECTED=true

# ========================================
# DEBUG & DEVELOPMENT
# ========================================

# Global debug mode
DEBUG_MODE=false

# Verbose logging for troubleshooting
VERBOSE_LOGGING=false

# Test mode (dry run without actual actions)
TEST_MODE=false

# ========================================
# BACKWARDS COMPATIBILITY
# ========================================

# Support for legacy configuration files
LEGACY_CONFIG_SUPPORT=true


# Path to legacy thresholds config - REMOVED, settings moved to modules
# LEGACY_THRESHOLDS_CONFIG="config/thresholds.conf"

# ========================================
# NOTES
# ========================================

# This file is sourced by:
# - monitor.sh (for module management and execution)
# - status.sh (for display preferences and defaults)  
# - setup.sh (for system detection and configuration)
#
# Module-specific settings should be placed in individual
# config files: modules/<MODULE_NAME>/config.conf
#
# The setup script will detect hardware and write the hardware
# detection variables to the machine-specific config/SYSTEM.conf.
#
# MODULE MANAGEMENT:
# Modules are managed through USE_MODULES and IGNORE_MODULES settings above.
# This replaces the old *.enabled symlink system which has been removed.
